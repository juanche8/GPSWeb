(function(a){var c,e,f,d,g,b={menuStyle:{listStyle:"none",padding:"1px",margin:"0px",backgroundColor:"#fff",border:"1px solid #999",width:"100px"},itemStyle:{margin:"0px",color:"#000",display:"block",cursor:"default",padding:"3px",border:"1px solid #fff",backgroundColor:"transparent"},itemHoverStyle:{border:"1px solid #0a246a",backgroundColor:"#b6bdd2"},eventPosX:"pageX",eventPosY:"pageY",shadow:true,onContextMenu:null,onShowMenu:null};a.fn.contextMenu=function(j,f){if(!c)c=a('<div id="jqContextMenu"></div>').hide().css({position:"absolute",zIndex:"500"}).appendTo("body").bind("click",function(a){a.stopPropagation()});if(!e)e=a("<div></div>").css({backgroundColor:"#000",position:"absolute",opacity:.2,zIndex:499}).appendTo("body").hide();d=d||[];d.push({id:j,menuStyle:a.extend({},b.menuStyle,f.menuStyle||{}),itemStyle:a.extend({},b.itemStyle,f.itemStyle||{}),itemHoverStyle:a.extend({},b.itemHoverStyle,f.itemHoverStyle||{}),bindings:f.bindings||{},shadow:f.shadow||f.shadow===false?f.shadow:b.shadow,onContextMenu:f.onContextMenu||b.onContextMenu,onShowMenu:f.onShowMenu||b.onShowMenu,eventPosX:f.eventPosX||b.eventPosX,eventPosY:f.eventPosY||b.eventPosY});var h=d.length-1;a(this).bind("contextmenu",function(a){var b=!!d[h].onContextMenu?d[h].onContextMenu(a):true;g=a.target;if(b){i(h,this,a);return false}});return this};function i(k,j,i){var b=d[k];f=a("#"+b.id).find("ul:first").clone(true);f.css(b.menuStyle).find("li").css(b.itemStyle).hover(function(){a(this).css(b.itemHoverStyle)},function(){a(this).css(b.itemStyle)}).find("img").css({verticalAlign:"middle",paddingRight:"2px"});c.html(f);if(!!b.onShowMenu)c=b.onShowMenu(i,c);a.each(b.bindings,function(d,b){a("#"+d,c).bind("click",function(){h();b(j,g)})});c.css({left:i[b.eventPosX],top:i[b.eventPosY]}).show();b.shadow&&e.css({width:c.width(),height:c.height(),left:i.pageX+2,top:i.pageY+2}).show();a(document).one("click",h)}function h(){c.hide();e.hide()}a.contextMenu={defaults:function(c){a.each(c,function(d,c){if(typeof c=="object"&&b[d])a.extend(b[d],c);else b[d]=c})}}})(jQuery);$(function(){$("div.contextMenu").hide()});